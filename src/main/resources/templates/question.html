<!DOCTYPE html>
<html lang="zh-CN" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title th:text="${questionDTO.getTitle()}"></title>
    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <!--自己写的css放他后面-->
    <!--格式话代码ctrl+alt+l-->

    <!--页面渲染之后再加载js-->
    <script src="/js/jquery-3.3.1.min.js"></script>
    <!--bootstrap依赖jq必须在jq引入后引入bootstrap.min.js-->
    <script src="/js/bootstrap.min.js"></script>
    <!--自己写的jq代码放他两后面-->
    <style>
        .reset {
            position: absolute;
            right: 15px;
            bottom: 10px;
        }
    </style>
    <script>
        function postReply() {
            var questionId = $("#questionId").val();
            var description = $("#description").val();
            $.ajax({
                type:"POST",
                url:"/comment",
                contentType:"application/json",
                data:JSON.stringify({
                    "parentId":questionId,
                    "content":description,
                    "type":1
                }),
                success:function (data) {
                    console.log(data)
                },
                dataType:"json"
            });
        }
    </script>
</head>
<body style="background: linear-gradient(to top, #cfd9df 0%, #e2ebf0 100%) no-repeat fixed;">
<div th:insert="~{navigation :: nav}"></div>
<div class="container-fluid"
     style="background-color: #ffffff;padding-bottom: 20px;margin: 0 150px 40px 150px;border-radius: 3px;">
    <div class="row">
        <div class="col-lg-9 col-md-12 col-sm-12 col-xs-12" style="border-right: 1px solid #8c8c8c;">
            <div style="width: 100%;padding-bottom: 10px;margin-bottom: 20px; border-bottom: 1px solid #0f0f0f;"><h2
                    style="margin-left: 10px;"><span
                    class="glyphicon glyphicon-list-alt" aria-hidden="true"></span>&ensp;<span
                    th:text="${questionDTO.getTitle()}"></span></h2>
                <div style="color: #636e72;margin-left: 10px">
                    作者：<span th:text="${questionDTO.user.getName()}"></span>
                    &ensp;发布时间：<span th:text="${#dates.format(questionDTO.gmtCreate,'yyyy-MM-dd HH:mm')}"></span>
                    &ensp;阅读数：<span th:text="${questionDTO.viewCount}"></span>
                </div>
            </div>
            <div style="width: 100%; padding-bottom: 25px;margin-bottom: 20px; border-bottom: 1px solid #0f0f0f;">
                <h3>问题描述 ：</h3>
                <div style="font-size: 20px;word-wrap: break-word;word-break: break-all;overflow: hidden;"
                     th:text="${questionDTO.getDescription()}"></div>
                <div th:if="${session.user != null && session.user.id == questionDTO.creator}" style="float: right;">
                    <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span><a
                        th:href="@{'/publish/'+${questionDTO.getId()}}">&ensp;编辑&ensp;</a></div>
                <!--如果用户自己传值修改的话，有bug，得后台验证，已解决-->
            </div>

            <!--编辑器-->
            <div>
                <label for="description">问题回复:</label>
                <p></p>
                <div style="position: relative;">
                    <input type="hidden" id="questionId" th:value="${questionDTO.getId()}">
                    <textarea class="form-control" name="description" id="description"
                              placeholder="请输入你的回复内容..."
                              rows="15" style="resize: none;"></textarea>
                    <div class="reset"><span class="glyphicon glyphicon-trash" aria-hidden="true"></span></div>
                </div>
                <button class="btn btn-success" onclick="postReply()" style="margin-left: 94%;margin-top: 10px" id="reply">回复
                </button>
            </div>
            <script>
                $(".reset").click(function () {
                    $("#description").val("");
                })
            </script>

        </div>
        <div class="col-lg-3 col-md-12 col-sm-12 col-xs-12" style="margin-top: 30px">
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="border-bottom: solid 1px #b2bec3;">
                <h4>发起人</h4>
                <div class="media" style="margin-bottom: 20px">
                    <div class="media-left media-middle">
                        <a href="#">
                            <img style="width: 50px; height: 50px" class="img-rounded media-object"
                                 th:src="${questionDTO.user.avatarUrl}">
                        </a>
                    </div>
                    <div class="media-body">
                        <p></p>
                        <a href="#">&ensp;<span style="font-size: 20px" th:text="${questionDTO.user.getName()}"></span></a>
                    </div>
                </div>
            </div>
            <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="margin: 10px 0">
                <h4>相关问题</h4>
            </div>
        </div>
    </div>
</div>
</body>
</html>